<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver Search</title>
    
    <link rel="manifest" href="data:application/manifest+json;base64,ewogICJzaG9ydF9uYW1lIjogIkRyaXZlciBBcHAiLAogICJuYW1lIjogIkRyaXZlciBTZWFyY2ggRGlyZWN0b3J5IiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFNQUFBQUVBQ0FZQUFBQzdnUEFBQUFBQWdEQVFCQUFBRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFQSUNSR0RBQUFCR0JBQUFBTk5ORkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZ...eHRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGR'CiAgICAgICJ0eXBlIjogImltYWdlL3BuZyIsCiAgICAgICJzaXplcyI6ICIxOTJ4MTkyIgogICAgfQogIF0sCiAgInN0YXJ0X3VybCI6ICJpbmRleC5odG1sIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAidGhlbWVfY29sb3IiOiAiIzRGNDZFNSIKfQ==">
    
    <meta name="theme-color" content="#6366F1"/>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @keyframes fade-in-scale {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .animate-fade-in-scale { animation: fade-in-scale 0.3s ease-out forwards; }

        @keyframes fade-in-up {
            from { transform: translate(-50%, 100%); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }
        @keyframes fade-out-down {
            from { transform: translate(-50%, 0); opacity: 1; }
            to { transform: translate(-50%, 100%); opacity: 0; }
        }
        .animate-toast-in {
            animation: fade-in-up 0.4s ease-out forwards;
        }
        .animate-toast-out {
            animation: fade-out-down 0.4s ease-in forwards;
        }
    </style>
</head>
<body class="bg-slate-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        const initialDriverData = [
            { id: 1, name: 'ANANTH.S', phone: '8610327455' },
            { id: 2, name: 'ANBARASAN', phone: '9677769344' },
            { id: 3, name: 'ANNA DURAI M', phone: '9677034489' },
            { id: 4, name: 'ARJUN RAI', phone: '9163473812' },
            { id: 5, name: 'AROCKIYASAMY A', phone: '8428448444 | 7305566197' },
            { id: 6, name: 'AROKIYA SUNDAR.P', phone: '9384939544' },
            { id: 7, name: 'ARUL MURUGAN R', phone: '8825652316 | 9047055013' },
            { id: 8, name: 'ARUL RAJ M A', phone: '9787305594' },
            { id: 9, name: 'BABU.K', phone: '9498067581 | 9342091132' },
            { id: 10, name: 'BALAGURU S', phone: '8681832531' },
            { id: 11, name: 'BALAMURUGAN.S', phone: '9597309781' },
            { id: 12, name: 'BALASUBRAMANIAN.M', phone: '9789878252' },
            { id: 13, name: 'BALRAJ.V', phone: '9962016218' },
            { id: 14, name: 'BHASKAR.S', phone: '7558121885' },
            { id: 15, name: 'CHELLADURAI M', phone: '8344843341 | 7402041314' },
            { id: 16, name: 'CHELLAPANDIAN K', phone: '9840712884' },
            { id: 17, name: 'CHINNADURAI.S', phone: '9047715079' },
            { id: 18, name: 'CHIRANSIVIRAJA D', phone: '9944359892' },
            { id: 19, name: 'DHAMODHARA KANNAN', phone: '7200656045' },
            { id: 20, name: 'DHANIYAL', phone: '9962655061' },
            { id: 21, name: 'ELANGOVAN M', phone: '9597150874' },
            { id: 22, name: 'GANESAN.V', phone: '9385986719' },
            { id: 23, name: 'GOPI M', phone: '9884348370 | 9444742113' },
            { id: 24, name: 'GREESH KUMAR S', phone: '9994799350' },
            { id: 25, name: 'GUNASEKARAN P', phone: '7358291438' },
            { id: 26, name: 'JAYAKANDAN P', phone: '9884125710' },
            { id: 27, name: 'JAYAKUMAR', phone: '9787095197' },
            { id: 28, name: 'JOHN KENNEDY.S', phone: '9626385074' },
            { id: 29, name: 'KANAGARAJ P', phone: '9346733782' },
            { id: 30, name: 'KANI L', phone: '9791505627' },
            { id: 31, name: 'KANNAN V', phone: '8754510022' },
            { id: 32, name: 'KANNIYAPPAN.N', phone: '8870312890 | 8072080610' },
            { id: 33, name: 'KARTHICK RAJ T', phone: '7904307207' },
            { id: 34, name: 'KARTHIK.A', phone: '9952842888 | 8825709495' },
            { id: 35, name: 'KARUPIYA', phone: '9791911906' },
            { id: 36, name: 'KONDAPPASAMY', phone: '8015550555' },
            { id: 37, name: 'KRISHNA MOORTHY', phone: '6374589021 | 9655907643' },
            { id: 38, name: 'KRISHNASAMY.M', phone: '9003599819' },
            { id: 39, name: 'LAWRANCE M', phone: '8973578035' },
            { id: 40, name: 'LOGANATHAN R', phone: '9543234070' },
            { id: 41, name: 'MADASAMY.S', phone: '7639929124' },
            { id: 42, name: 'MADASAMY V', phone: '9787729807' },
            { id: 43, name: 'MANIKANDAN.D', phone: '9629526757' },
            { id: 44, name: 'MANIKANDAN.S.P', phone: '9965717886' },
            { id: 45, name: 'MANOHARAN.', phone: '9790588878' },
            { id: 46, name: 'MARIAPPAN N', phone: '9751375940' },
            { id: 47, name: 'MARICHAMY C', phone: '9080199459' },
            { id: 48, name: 'MARIMUTHU', phone: '9003526048' },
            { id: 49, name: 'LAWRANCE M', phone: '8056265089' },
            { id: 50, name: 'MARK SAMUEL K', phone: '6374888174' },
            { id: 51, name: 'MOHAMED BILAL A', phone: '7539965273' },
            { id: 52, name: 'MOHAN K', phone: '9884881305' },
            { id: 53, name: 'MURUGAIAN A', phone: '9789023538' },
            { id: 54, name: 'MURUGAN ( KARAIKUDI )', phone: '9944214419' },
            { id: 55, name: 'MURUGAN K', phone: '9790169644' },
            { id: 56, name: 'MURUGAN K T', phone: '9094119208 | 9080129015' },
            { id: 57, name: 'MURUGAN.P', phone: '9952835168 | 9346327854' },
            { id: 58, name: 'MUTHU KUMAR', phone: '6379668187' },
            { id: 59, name: 'MUTHU VIJAYAN.M', phone: '7339304398' },
            { id: 60, name: 'MUTHURAJ S', phone: '8870080335' },
            { id: 61, name: 'NANHE LAL. I', phone: '6380338278' },
            { id: 62, name: 'NANNHELAL.K', phone: '8754587387' },
            { id: 63, name: 'PALANIVEL T', phone: '9003767318' },
            { id: 64, name: 'PALRAJ N', phone: '8056133018' },
            { id: 65, name: 'PARAMASIVAN S', phone: '9543238075' },
            { id: 66, name: 'PATTUGANESAN.T', phone: '9443454805' },
            { id: 67, name: 'PATTURAJAPANDIAN P', phone: '9363578445' },
            { id: 68, name: 'POOVANDRAN.', phone: '9047916030' },
            { id: 69, name: 'PRABHU.ST', phone: '7708272557 | 7708929375' },
            { id: 70, name: 'PRAKASH B', phone: '7708252626' },
            { id: 71, name: 'PRITAM SINGH.S', phone: '7983083872' },
            { id: 72, name: 'RAJA.V', phone: '7904938838' },
            { id: 73, name: 'RAJESHKANNA U', phone: '9789628558' },
            { id: 74, name: 'RAJKUMAR.S', phone: '6381164473' },
            { id: 75, name: 'RAJU M', phone: '8668189826' },
            { id: 76, name: 'RAJU SINGH', phone: '8148570966' },
            { id: 77, name: 'RAMAKRISHNAN S', phone: '9840665738' },
            { id: 78, name: 'RAMAMOORTHY G', phone: '9965278479' },
            { id: 79, name: 'RAMANATHAN J', phone: '9840180703' },
            { id: 80, name: 'RAMAR G', phone: '7826816691' },
            { id: 81, name: 'RAMASAMY P', phone: '8124376004' },
            { id: 82, name: 'RAMESH .M', phone: '7639842325' },
            { id: 83, name: 'RAMESH .P', phone: '9025498332' },
            { id: 84, name: 'RAMESH.A', phone: '96002419496' },
            { id: 85, name: 'RAMESHKUMAR.N', phone: '9500755252' },
            { id: 86, name: 'RASUL G', phone: '9600300348' },
            { id: 87, name: 'RAVI S', phone: '9976714933' },
            { id: 88, name: 'RAVINDRAN.G', phone: '8870355140' },
            { id: 89, name: 'RAZAK.S', phone: '8754094226' },
            { id: 90, name: 'SANKAR.P', phone: '7868985039' },
            { id: 91, name: 'SANKILIPANDIAN R', phone: '9500371919' },
            { id: 92, name: 'SANTHANARAJ.M', phone: '9789135633' },
            { id: 93, name: 'SANTHOSH KUMAR M C', phone: '9446999761 | 9840077871' },
            { id: 94, name: 'SARAVANAKUMAR G', phone: '6381101371' },
            { id: 95, name: 'SARAVANAN', phone: '9994014472' },
            { id: 96, name: 'SEENAVARAYAMOORTHI S', phone: '8754748187 | 9788748187' },
            { id: 97, name: 'SELVAKUMAR V', phone: '9500312831 | 9384717331' },
            { id: 98, name: 'SELVAM S', phone: '9942966635' },
            { id: 99, name: 'SELVARAJ A', phone: '9442879056' },
            { id: 100, name: 'SELVARAJ.B', phone: '9940181547' },
            { id: 101, name: 'SENTHIL S', phone: '6381594895' },
            { id: 102, name: 'SHANMUGASUNDARAM A', phone: '8525932481' },
            { id: 103, name: 'SIVAKUMAR S', phone: '8825685156 | 9489539457' },
            { id: 104, name: 'SIVANANDHAM S', phone: '9944976589' },
            { id: 105, name: 'SONAI MUTHU G', phone: '9994703363' },
            { id: 106, name: 'SORNAM N', phone: '9677324709' },
            { id: 107, name: 'STALIN S', phone: '6369337327 | 9043914023' },
            { id: 108, name: 'SUBBIAH.U', phone: '9629233811' },
            { id: 109, name: 'SUBRAMANI C', phone: '9486448056' },
            { id: 110, name: 'SUDHAKAR.S', phone: '8870171560' },
            { id: 111, name: 'SURESH .E', phone: '9025301772 | 8939663080' },
            { id: 112, name: 'TAMIZHARASAN M', phone: '8148594656' },
            { id: 113, name: 'THILAGARAJ J', phone: '9940593071' },
            { id: 114, name: 'THIRUNAVUKKARASU S', phone: '7358188477' },
            { id: 115, name: 'VADIVEL S', phone: '9003941572' },
            { id: 116, name: 'VASUDEVAN.S', phone: '8248156680' },
            { id: 117, name: 'VEERA PERUMAL.S', phone: '8220710698' },
            { id: 118, name: 'VETRIVEL S', phone: '9952378432' },
            { id: 119, name: 'VICTOR.A', phone: '9094811313' },
            { id: 120, name: 'VIGNESH.P', phone: '7200840747 | 9566240747' },
            { id: 121, name: 'VINOTH KUMAR M', phone: '8072506483 | 9626116368' }
        ];

        const Toast = ({ message }) => {
            const [visible, setVisible] = useState(false);

            useEffect(() => {
                if (message) {
                    setVisible(true);
                    const timer = setTimeout(() => {
                        setVisible(false);
                    }, 2500); 
                    return () => clearTimeout(timer);
                }
            }, [message]);

            if (!message) return null;

            return (
                <div 
                    className={`fixed bottom-5 left-1/2 bg-gray-900 text-white py-3 px-6 rounded-full shadow-lg z-50 transition-all duration-300 ${visible ? 'animate-toast-in' : 'animate-toast-out'}`}
                >
                    {message}
                </div>
            );
        };

        const DriverListItem = ({ driver, onSelect, onEdit, onDelete }) => (
          <li className="px-4 py-3 bg-white border-b border-gray-200 flex justify-between items-center transition-all duration-200 hover:bg-indigo-50">
            <div onClick={() => onSelect(driver)} className="cursor-pointer flex-grow">
                <p className="font-semibold text-gray-800 text-lg">{driver.name}</p>
                <p className="text-gray-500 text-sm">{driver.phone || 'No phone number'}</p>
            </div>
            <div className="flex-shrink-0 space-x-2">
                <button onClick={() => onEdit(driver)} className="text-indigo-600 hover:text-indigo-800 font-semibold p-2 rounded-md transition-colors">Edit</button>
                <button onClick={() => onDelete(driver.id)} className="text-red-600 hover:text-red-800 font-semibold p-2 rounded-md transition-colors">Delete</button>
            </div>
          </li>
        );

        const DriverDetailModal = ({ driver, onClose }) => {
            if (!driver) return null;
            const phoneNumbers = driver.phone ? driver.phone.split('|').map(num => num.trim()) : [];
            return (
                <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-auto transform transition-all duration-300 scale-95 opacity-0 animate-fade-in-scale">
                        <div className="p-6">
                            <div className="flex justify-between items-start mb-4">
                                <div className="flex items-center">
                                    <div className="bg-indigo-600 text-white rounded-full h-12 w-12 flex items-center justify-center text-xl font-bold">
                                        {driver.name.charAt(0)}
                                    </div>
                                    <div className="ml-4">
                                        <h2 className="text-2xl font-bold text-gray-800">{driver.name}</h2>
                                    </div>
                                </div>
                                <button onClick={onClose} className="text-gray-400 hover:text-gray-600 transition-colors">
                                    <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>
                                </button>
                            </div>
                            <div className="space-y-4 mt-6">
                                <div className="flex items-center">
                                    <svg className="w-6 h-6 text-gray-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" /></svg>
                                    <div>
                                        <p className="text-gray-500 text-sm">Phone Number(s)</p>
                                        {phoneNumbers.length > 0 ? phoneNumbers.map((phone, index) => (
                                            <a key={index} href={`tel:${phone}`} className="text-indigo-600 font-semibold text-lg block hover:underline">
                                                {phone}
                                            </a>
                                        )) : <p className="text-gray-700 font-semibold text-lg">Not Available</p>}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div className="bg-gray-50 px-6 py-4 rounded-b-2xl">
                            <button onClick={onClose} className="w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 shadow-md">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const DriverFormModal = ({ isOpen, onClose, onSave, driver }) => {
            const [name, setName] = useState('');
            const [phone, setPhone] = useState('');
            const isEditing = !!driver;

            useEffect(() => {
                if (isEditing && isOpen) {
                    setName(driver.name);
                    setPhone(driver.phone);
                } else if (!isEditing && isOpen) {
                    setName('');
                    setPhone('');
                }
            }, [driver, isOpen]);

            if (!isOpen) return null;

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!name.trim()) {
                    alert('Driver name is required.');
                    return;
                }
                onSave({ ...driver, name, phone });
                onClose();
            };

            return (
                 <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-auto transform transition-all duration-300 scale-95 opacity-0 animate-fade-in-scale">
                        <form onSubmit={handleSubmit}>
                            <div className="p-6">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold text-gray-800">{isEditing ? 'Edit Driver' : 'Add New Driver'}</h2>
                                    <button type="button" onClick={onClose} className="text-gray-400 hover:text-gray-600 transition-colors">
                                        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>
                                    </button>
                                </div>
                                <div className="space-y-4">
                                    <div>
                                        <label htmlFor="driverName" className="block text-sm font-medium text-gray-700">Driver Name</label>
                                        <input type="text" id="driverName" value={name} onChange={(e) => setName(e.target.value)} className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" required />
                                    </div>
                                    <div>
                                        <label htmlFor="phone" className="block text-sm font-medium text-gray-700">Phone Number</label>
                                        <input type="text" id="phone" value={phone} onChange={(e) => setPhone(e.target.value)} className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" />
                                    </div>
                                </div>
                            </div>
                            <div className="bg-gray-50 px-6 py-4 rounded-b-2xl flex space-x-3">
                                <button type="button" onClick={onClose} className="w-full bg-gray-200 text-gray-800 font-bold py-3 px-4 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-all duration-200">
                                    Cancel
                                </button>
                                <button type="submit" className="w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 shadow-md">
                                    Save Changes
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        };

        function App() {
            const [driverData, setDriverData] = useState(() => {
                const savedDrivers = localStorage.getItem('driverData');
                if (savedDrivers && savedDrivers !== '[]') {
                    return JSON.parse(savedDrivers);
                }
                return initialDriverData;
            });

            useEffect(() => {
                localStorage.setItem('driverData', JSON.stringify(driverData));
            }, [driverData]);

            const [searchQuery, setSearchQuery] = useState('');
            const [selectedDriver, setSelectedDriver] = useState(null);
            const [isFormOpen, setIsFormOpen] = useState(false);
            const [editingDriver, setEditingDriver] = useState(null);
            const [toastMessage, setToastMessage] = useState('');

            const filteredDrivers = useMemo(() => {
                if (!searchQuery) return [];
                return driverData.filter(driver =>
                    driver.name.toLowerCase().includes(searchQuery.toLowerCase())
                ).sort((a, b) => a.name.localeCompare(b.name));
            }, [searchQuery, driverData]);

            const handleSelectDriver = (driver) => setSelectedDriver(driver);
            const handleCloseDetailModal = () => setSelectedDriver(null);
            
            const handleSaveDriver = (driverToSave) => {
                if (driverToSave.id) {
                    setDriverData(driverData.map(d => d.id === driverToSave.id ? driverToSave : d));
                    setToastMessage('Successfully saved!');
                } else {
                    const newId = driverData.length > 0 ? Math.max(...driverData.map(d => d.id)) + 1 : 1;
                    setDriverData([...driverData, { ...driverToSave, id: newId }]);
                    setToastMessage('Successfully added!');
                }
                setEditingDriver(null);
                setIsFormOpen(false);
            };

            const handleOpenAddForm = () => {
                setEditingDriver(null);
                setIsFormOpen(true);
            };

            const handleOpenEditForm = (driver) => {
                setEditingDriver(driver);
                setIsFormOpen(true);
            };

            const handleDeleteDriver = (driverId) => {
                if (window.confirm("Are you sure you want to delete this driver?")) {
                    setDriverData(driverData.filter(d => d.id !== driverId));
                    setToastMessage('Successfully deleted!');
                }
            };

            return (
                <div className="min-h-screen font-sans">
                    <header className="bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg sticky top-0 z-10">
                        <div className="max-w-2xl mx-auto p-4">
                            <div className="flex justify-between items-center">
                                <h1 className="text-3xl font-bold">Driver Directory</h1>
                                <button onClick={handleOpenAddForm} className="bg-white text-indigo-600 font-semibold py-2 px-4 rounded-lg hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-indigo-600 focus:ring-white transition-all duration-200 shadow-md flex items-center">
                                    <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6m0 0v6m0-6h6m-6 0H6" /></svg>
                                    Add New
                                </button>
                            </div>
                            <div className="mt-4 relative">
                                <input
                                    type="text"
                                    value={searchQuery}
                                    onChange={e => setSearchQuery(e.target.value)}
                                    placeholder="Start typing a driver's name..."
                                    className="w-full px-4 py-3 text-lg border-2 border-transparent bg-white bg-opacity-20 text-white placeholder-indigo-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-white focus:bg-opacity-30 transition-shadow"
                                />
                                <svg className="w-6 h-6 text-indigo-200 absolute top-1/2 right-4 transform -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                            </div>
                        </div>
                    </header>
                    <main className="max-w-2xl mx-auto p-4">
                        {searchQuery && (
                            <div className="bg-white rounded-lg shadow-lg overflow-hidden">
                                {filteredDrivers.length > 0 ? (
                                    <ul>
                                        {filteredDrivers.map(driver => 
                                            <DriverListItem 
                                                key={driver.id} 
                                                driver={driver} 
                                                onSelect={handleSelectDriver}
                                                onEdit={handleOpenEditForm}
                                                onDelete={handleDeleteDriver}
                                            />
                                        )}
                                    </ul>
                                ) : (
                                    <div className="p-8 text-center text-gray-500">
                                        <p className="font-semibold">No drivers found for "{searchQuery}"</p>
                                        <p className="text-sm mt-1">Please check the spelling or try another name.</p>
                                    </div>
                                )}
                            </div>
                        )}
                        {!searchQuery && (
                            <div className="p-8 text-center text-gray-500 mt-10">
                                <svg className="w-16 h-16 mx-auto text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" /></svg>
                                <h3 className="mt-4 text-xl font-semibold text-gray-700">Welcome!</h3>
                                <p className="mt-1 text-gray-500">Use the search bar above to find a driver or add a new one.</p>
                            </div>
                        )}
                    </main>
                    <DriverDetailModal driver={selectedDriver} onClose={handleCloseDetailModal} />
                    <DriverFormModal 
                        isOpen={isFormOpen} 
                        onClose={() => setIsFormOpen(false)} 
                        onSave={handleSaveDriver}
                        driver={editingDriver}
                    />
                    <Toast message={toastMessage} />
                </div>
            );
        }

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);

        if ('serviceWorker' in navigator) {
            const swCode = `
                const CACHE_NAME = 'driver-app-cache-v1';
                const urlsToCache = ['/'];
                self.addEventListener('install', event => {
                  event.waitUntil(
                    caches.open(CACHE_NAME).then(cache => cache.addAll(urlsToCache))
                  );
                });
                self.addEventListener('fetch', event => {
                  event.respondWith(
                    caches.match(event.request).then(response => {
                      return response || fetch(event.request);
                    })
                  );
                });
            `;
            const swBlob = new Blob([swCode], { type: 'application/javascript' });
            const swUrl = URL.createObjectURL(swBlob);

            window.addEventListener('load', () => {
                navigator.serviceWorker.register(swUrl).then(registration => {
                    console.log('ServiceWorker registration successful.');
                }).catch(err => {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
</body>
</html>